<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Event Details</title>
    <!-- <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">-->
</head>
<body>
    <h1>Event Details</h1>

    <main id="eventDetail">
        <p>Event Name: <span id="detailEventName"></span></p>
        <p>Event Time: <span id="detailEventTime"></span></p>
        <p>Event Address: <span id="detailEventAddress"></span></p>
        <p>Starting Address: <span id="detailStartAddress"></span></p>
        <p>Weather: <span id="detailWeather"></span></p>
        <p>Directions: <span id="detailDirections"></span></p>
    </main>

    <a href="index.html">Back</a>

    <script>document.addEventListener('DOMContentLoaded', function () {
        const urlString = new URLSearchParams(window.location.search);
        const eventId = urlString.get('eventId');
    
        if (eventId !== null) {
            displayEventDetails(eventId);
        }
    });
    
    function displayEventDetails(eventId) {
        const events = localStorage.getItem('events') ? JSON.parse(localStorage.getItem('events')) : [];
        const event = events.find(event => event.eventName === eventId);
        if (event) {
            
            document.getElementById('detailEventName').innerText = event.eventName;
            document.getElementById('detailEventTime').innerText = new Date(event.eventTime).toLocaleString();
            document.getElementById('detailEventAddress').innerText = event.location;
            document.getElementById('detailStartAddress').innerText = event.startingLocation;
             
            document.getElementById('detailDirections').innerText = event.directions; 
        } else {
            
            document.getElementById('eventDetail').innerHTML = '<p>Event not found.</p>';
        }
    }
    
    function fetchWeather(city) {

const apiKey = 'c88c041873c88fa8bc608b33404b1a02'; 
const apiUrl = `https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${apiKey}&units=metric`;
 
fetch(apiUrl)
.then(response => response.json())
.then(data => {
   displayWeather(data);
   console.log(data)
})
.catch(error => {
   console.error('Error fetching weather:', error);
});
}

function displayWeather(data) {
var weatherInfoDiv = document.getElementById('detailWeather');
weatherInfoDiv.innerHTML = `
   <h2 class="text-xl mb-2">${data.name}, ${data.sys.country}</h2>
   <p class="mb-1">Temperature: ${data.main.temp}Â°C</p>
   <p class="mb-1">Weather: ${data.weather[0].description}</p>
   <p class="mb-1">Humidity: ${data.main.humidity}%</p>
   <p class="mb-1">Temp low: ${data.main.temp_min}%</p>
   <p class="mb-1">temp high: ${data.main.temp_max}%</p>
`;
}

function weather() {
const city = document.getElementById('detailEventAddress').innerText;
fetchWeather(city);
}

// Call the weather function when the page loads
window.onload = function() {
weather();
};
</script>


    
</body>
</html>

